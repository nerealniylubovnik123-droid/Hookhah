<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0a0b0d" />
  <title>Hookah Mixes</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ВИЗУАЛ ТОЛЬКО: тёплая тёмная тема + анимации (логика НЕ менялась) -->
  <style id="anim-pack">
/* ===== Themes page animations & active highlight ===== */
@keyframes slideFadeIn {
  0% { opacity: 0; transform: translateY(-10px); }
  100% { opacity: 1; transform: none; }
}
#themesPage { animation: slideFadeIn .28s cubic-bezier(.2,.6,.2,1); }
#themesGrid .brand-chip{ transition: transform .18s cubic-bezier(.2,.6,.2,1), box-shadow .18s, outline .18s; }
#themesGrid .brand-chip.active{
  background: linear-gradient(180deg, color-mix(in oklab, var(--accent1) 12%, var(--chip)), var(--chip));
  box-shadow: 0 0 0 2px var(--ring) inset, 0 10px 22px color-mix(in oklab, var(--accent1) 20%, transparent);
  transform: translateY(-1px);
}
#themesGrid .brand-chip:active{ transform: translateY(0); }

/* ===== Theme sheet positioning ===== */
#themeSheet{
  position: fixed;
  inset: 0;
  z-index: 80;
  background: color-mix(in oklab, var(--bg) 70%, black);
  backdrop-filter: blur(2px);
  display: flex;
  align-items: flex-end;
  justify-content: center;
}
#themeSheet[hidden]{ display:none; }
#themeSheet .sheet{
  position: relative;
  width: 100%;
  max-width: 520px;
  background: var(--card);
  border-top: 1px solid var(--border);
  border-radius: 16px 16px 0 0;
  padding: 14px 12px 16px;
  max-height: 85dvh;
  overflow: auto;
  margin: 0 8px 8px;
  box-shadow: 0 -20px 40px rgba(0,0,0,.4);
}
#themeSheet .grid{ display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:10px; }
@media (max-width: 420px){
  #themeSheet .grid{ grid-template-columns:repeat(2, minmax(0,1fr)); }
}
@media (min-width: 520px){
  #themeSheet .sheet{
    left: 50%;
    right: auto;
    bottom: 50%;
    transform: translate(-50%, 50%);
    width: min(520px, 92vw);
    border-radius: 16px;
  }
}
#themeSheet .opt{
  border:1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  text-align:center;
  cursor:pointer;
  background: color-mix(in oklab, var(--card) 92%, transparent);
  transition: transform .12s ease;
}
#themeSheet .opt.active{ outline:2px solid var(--ring); }
#themeSheet .opt:active{ transform: scale(.98); }

/* ===== Minimal Light stronger overrides ===== */
body[data-theme="minimal-light"]{
  --text:#0b0c0e;
  --muted:#4b5563;
  --card:#ffffff;
  --border:rgba(0,0,0,.12);
  --chip:#f3f4f6;
}
/* Force key text utilities to dark in minimal-light */
body[data-theme="minimal-light"] .text-slate-100,
body[data-theme="minimal-light"] .text-slate-200,
body[data-theme="minimal-light"] .text-slate-300,
body[data-theme="minimal-light"] .text-slate-900{
  color:#0b0c0e !important;
}
body[data-theme="minimal-light"] .opacity-60,
body[data-theme="minimal-light"] .text-slate-400,
body[data-theme="minimal-light"] .text-slate-300\/70,
body[data-theme="minimal-light"] .text-slate-300\/80{
  color:#4b5563 !important;
}
/* Inputs and badges readable on light */
body[data-theme="minimal-light"] .bg-slate-900,
body[data-theme="minimal-light"] .bg-slate-800,
body[data-theme="minimal-light"] .bg-slate-700{
  background:#ffffff !important;
}
body[data-theme="minimal-light"] .border-slate-900,
body[data-theme="minimal-light"] .border-slate-800,
body[data-theme="minimal-light"] .border-slate-700{
  border-color: rgba(0,0,0,.12) !important;
}
body[data-theme="minimal-light"] .hover\:bg-white\/10:hover{
  background: rgba(0,0,0,.06) !important;
}

/* ===== Mobile & Readability Fixes ===== */

/* 1) Stabilize layout on touch: disable hover translate on touch devices */
@media (hover:none){
  .ui-card:hover{ transform:none !important; }
  .brand-chip:hover{ transform:none !important; }
}

/* 2) Header actions as a horizontal scroller on small screens */
@media (max-width: 480px){
  header > div:last-child{
    display:flex;
    gap:.5rem;
    overflow-x:auto;
    -webkit-overflow-scrolling:touch;
    padding-bottom: 2px;
  }
  header > div:last-child > *{
    flex:0 0 auto;
  }
}

/* 3) Prevent page "jumping" on focus rings by reserving outline space */
:focus-visible{ outline-offset: 2px; }
.tap:active{ transform: translateY(0) scale(.997); } /* keep subtle but not shift */

/* 4) Minimal-light theme readability: ensure foregrounds are dark on light surfaces */
body[data-theme="minimal-light"] .text-slate-100,
body[data-theme="minimal-light"] .text-slate-200,
body[data-theme="minimal-light"] .text-slate-300{
  color:#0b0c0e !important;
}
body[data-theme="minimal-light"] .opacity-60,
body[data-theme="minimal-light"] .text-slate-400{
  color:#4b5563 !important;
}
/* Lighten heavy dark backgrounds that were mapped from bg-slate-9xx */
body[data-theme="minimal-light"] .bg-slate-900,
body[data-theme="minimal-light"] .bg-slate-800,
body[data-theme="minimal-light"] .bg-slate-700{
  background-color:#ffffff !important;
}
/* Softer borders for light theme */
body[data-theme="minimal-light"] .border-slate-900,
body[data-theme="minimal-light"] .border-slate-800,
body[data-theme="minimal-light"] .border-slate-700{
  border-color: rgba(0,0,0,.12) !important;
}
/* Active tabs: keep readable */
body[data-theme="minimal-light"] .bg-slate-100{ background:#e5e7eb !important; }
body[data-theme="minimal-light"] .text-slate-900{ color:#0b0c0e !important; }

/* 5) Card internal separators not too harsh on light */
body[data-theme="minimal-light"] .ui-card{
  box-shadow: 0 6px 16px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.6);
}

/* 6) Avoid full-viewport wobble on iOS address bar changes */
.min-h-\[100svh\]{ min-height: 100dvh; } /* prefer dynamic viewport unit */

/* === THEME OVERRIDES (map Tailwind-like classes to tokens) ================ */
/* Borders */
body[data-theme] .border-slate-700{ border-color: var(--border) !important; }
body[data-theme] .border-slate-800{ border-color: color-mix(in oklab, var(--border) 85%, black) !important; }
body[data-theme] .border-slate-900{ border-color: color-mix(in oklab, var(--border) 70%, black) !important; }
/* Backgrounds */
body[data-theme] .bg-slate-900{ background-color: color-mix(in oklab, var(--card) 80%, black) !important; }
body[data-theme] .bg-slate-800{ background-color: color-mix(in oklab, var(--card) 88%, black) !important; }
body[data-theme] .bg-slate-700{ background-color: color-mix(in oklab, var(--card) 92%, black) !important; }
/* Text */
body[data-theme] .text-slate-100, 
body[data-theme] .text-slate-200,
body[data-theme] .text-slate-300{ color: var(--text) !important; }
/* Muted text replacements */
body[data-theme] .text-slate-300\/70, 
body[data-theme] .text-slate-300\/80,
body[data-theme] .text-slate-400,
body[data-theme] .opacity-60{ color: var(--muted) !important; }
/* Badges that used border-slate & bg-slate */
body[data-theme] .badge, 
body[data-theme] .inline-flex.rounded-full.border{ border-color: var(--border) !important; background: color-mix(in oklab, var(--card) 85%, transparent) !important; }
/* Inputs & textarea (already themed, make specific) */
body[data-theme] input.h-9, 
body[data-theme] textarea{ background-color: color-mix(in oklab, var(--card) 86%, black) !important; border-color: var(--border) !important; color: var(--text) !important; }
/* Focus rings */
body[data-theme] .focus\:ring-slate-600:focus{ box-shadow: 0 0 0 2px var(--ring) !important; outline: none; border-color: var(--ring) !important; }
/* Header tab active buttons (bg-slate-100 text-slate-900) remap for light/dark) */
body[data-theme] .text-slate-900{ color: #0b0c0e !important; } /* fine for most themes */
body[data-theme="minimal-light"] .bg-slate-100{ background:#e5e7eb !important; }
body[data-theme]:not([data-theme="minimal-light"]) .bg-slate-100{ background: var(--text) !important; color:#0b0c0e !important; }
/* Hover overlay tweak */
body[data-theme] .hover\:bg-white\/10:hover{ background: color-mix(in oklab, var(--text) 10%, transparent) !important; }
/* Generic button borders */
body[data-theme] .border{ border-color: var(--border) !important; }
/* Brand-chip inherent */
body[data-theme] .brand-chip{ background: var(--chip) !important; border-color: var(--border) !important; }
/* Guest cards mini badges */
body[data-theme] .bg-slate-900.border-slate-700{ background: color-mix(in oklab, var(--card) 85%, transparent) !important; border-color: var(--border) !important; }

/* === THEME TOKENS ======================================================= */
:root{
  --bg:#0a0b0d; --card:#111216; --text:#e5e7eb; --muted:#9aa4b2; --ring:rgba(245,158,11,.55);
  --accent1:#F59E0B; --accent2:#FDBA74; --accent3:#FCA5A5;
  --chip:#0f1013; --border:rgba(148,163,184,.18);
  --seg1:#F59E0B; --seg2:#f97316; --seg3:#22c55e; --seg4:#a78bfa;
}
body[data-theme="warm-dark"]{
  --bg:#0a0b0d; --card:rgba(17,18,22,.82); --text:#e5e7eb; --muted:#9aa4b2; --ring:rgba(245,158,11,.55);
  --accent1:#F59E0B; --accent2:#FDBA74; --accent3:#FCA5A5;
  --chip:#0f1013; --border:rgba(148,163,184,.18);
  --seg1:#F59E0B; --seg2:#f97316; --seg3:#22c55e; --seg4:#a78bfa;
}
body[data-theme="frosted-glass"]{
  --bg:#0a1117; --card:rgba(13,23,33,.7); --text:#e6f0ff; --muted:#9fb3c8; --ring:rgba(125,211,252,.55);
  --accent1:#60a5fa; --accent2:#7dd3fc; --accent3:#a78bfa;
  --chip:rgba(15,25,35,.6); --border:rgba(147,197,253,.22);
  --seg1:#60a5fa; --seg2:#22d3ee; --seg3:#a78bfa; --seg4:#34d399;
  backdrop-filter: blur(8px);
}
body[data-theme="cyber-neon"]{
  --bg:#07060a; --card:#0c0a13; --text:#e6e1ff; --muted:#b7a8ff; --ring:rgba(168,85,247,.6);
  --accent1:#22d3ee; --accent2:#a78bfa; --accent3:#06b6d4;
  --chip:#0d0a17; --border:rgba(167,139,250,.25);
  --seg1:#22d3ee; --seg2:#a78bfa; --seg3:#06b6d4; --seg4:#67e8f9;
}
body[data-theme="minimal-light"]{
  --bg:#f7f7f8; --card:#ffffff; --text:#0b0c0e; --muted:#4b5563; --ring:rgba(59,130,246,.35);
  --accent1:#111827; --accent2:#6b7280; --accent3:#1f2937;
  --chip:#f3f4f6; --border:rgba(0,0,0,.08);
  --seg1:#111827; --seg2:#6b7280; --seg3:#1f2937; --seg4:#9ca3af;
}
body[data-theme="earth-sepia"]{
  --bg:#0e0c0a; --card:#151310; --text:#f3efe8; --muted:#cbbba4; --ring:rgba(234,179,8,.45);
  --accent1:#d97706; --accent2:#f59e0b; --accent3:#a16207;
  --chip:#14110e; --border:rgba(250,204,21,.18);
  --seg1:#d97706; --seg2:#f59e0b; --seg3:#a16207; --seg4:#84cc16;
}
body[data-theme="high-contrast"]{
  --bg:#000; --card:#000; --text:#fff; --muted:#d1d5db; --ring:rgba(255,255,0,.8);
  --accent1:#fff; --accent2:#fff; --accent3:#fff;
  --chip:#000; --border:rgba(255,255,255,.8);
  --seg1:#fff; --seg2:#d1d5db; --seg3:#9ca3af; --seg4:#6b7280;
}

/* Background flourishes adjusted to themes */
body{ background: var(--bg); color: var(--text); }
body[data-theme="warm-dark"]{
  background:
    radial-gradient(900px 600px at 10% -10%, rgba(245,158,11,.12), transparent 60%),
    radial-gradient(700px 500px at 95% 0%, rgba(253,186,116,.07), transparent 55%),
    var(--bg);
}
body[data-theme="frosted-glass"]{
  background:
    radial-gradient(900px 600px at 0% -20%, rgba(125,211,252,.16), transparent 60%),
    radial-gradient(700px 500px at 85% 0%, rgba(96,165,250,.12), transparent 55%),
    var(--bg);
}
body[data-theme="cyber-neon"]{
  background:
    radial-gradient(900px 600px at 10% -10%, rgba(167,139,250,.16), transparent 60%),
    radial-gradient(700px 500px at 90% 0%, rgba(34,211,238,.12), transparent 55%),
    var(--bg);
}
/* Inputs respect tokens */
input[type=text], input[type=number], textarea{
  background-color: color-mix(in oklab, var(--card) 86%, black);
  border-color: var(--border);
  color: var(--text);
}

/* Mix bar segments use tokenized gradients */
#mixBar .mix-seg:nth-child(1){ background:linear-gradient(90deg,var(--seg1),var(--seg2)); }
#mixBar .mix-seg:nth-child(2){ background:linear-gradient(90deg,var(--seg3),var(--seg4)); }
#mixBar .mix-seg:nth-child(3){ background:linear-gradient(90deg,var(--seg2),var(--seg1)); }
#mixBar .mix-seg:nth-child(4){ background:linear-gradient(90deg,var(--seg4),var(--seg3)); }

/* Small floating theme button */
#themeFab{
  position:fixed; right:12px; bottom:12px; z-index:50;
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  color:#0b0b0b; border-radius:999px; height:40px; padding:0 14px; font-size:12px;
  box-shadow:0 14px 30px rgba(0,0,0,.35);
}
#themeFab[hidden]{ display:none; }

/* Simple sheet */
#themeSheet[hidden]{ display:none; }

    /* ---------- Visual Tweaks (patch) ---------- */
    .ui-card{
      position: relative;
      background: rgba(17,18,22,.82);
      border: 1px solid rgba(148,163,184,.18);
      border-radius: 1rem;
      overflow: hidden;
      isolation: isolate;
    }
    .ui-card::before{
      content:"";
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0;
      background: conic-gradient(from 180deg at 50% 50%, rgba(245,158,11,.35), rgba(253,186,116,.25), rgba(148,163,184,.15), rgba(245,158,11,.35));
      mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      mask-composite: exclude; -webkit-mask-composite: xor;
      padding: 1px; border-radius: 1rem;
      transition: opacity .25s ease;
    }
    .ui-card:hover::before{ opacity:.55; }

    .brand-chip{
      position: relative;
      background: rgba(15,16,19,.75);
    }
    .brand-chip.active{
      background: linear-gradient(180deg, rgba(245,158,11,.08), rgba(15,16,19,.75));
      box-shadow: 0 0 0 2px rgba(245,158,11,.35) inset, 0 6px 14px rgba(245,158,11,.12);
    }
    .brand-chip:focus-visible{
      box-shadow: 0 0 0 2px var(--ring), 0 0 0 4px rgba(245,158,11,.15);
    }

    /* Smooth scrollbar */
    .brands-rail{
      scrollbar-width: thin;
      scrollbar-color: rgba(148,163,184,.35) transparent;
    }
    .brands-rail::-webkit-scrollbar{ height:8px; }
    .brands-rail::-webkit-scrollbar-track{ background: transparent; }
    .brands-rail::-webkit-scrollbar-thumb{ background: rgba(148,163,184,.35); border-radius: 999px; }

    /* Mix bar segments subtle separation */
    #mixBar .mix-seg{ box-shadow: inset -1px 0 0 rgba(0,0,0,.25); }

    /* Inputs higher contrast */
    input[type=text], input[type=number], textarea{
      background-color: #0f1115;
      border-color: rgba(148,163,184,.28);
    }
    input[type=text]:focus, input[type=number]:focus, textarea:focus{
      box-shadow: 0 0 0 2px var(--ring), 0 0 0 1px rgba(245,158,11,.25) inset;
    }

    :root{
      --bg:#0a0b0d; --card:#111216; --ring:rgba(245,158,11,.55);
      --warm1:#F59E0B; --warm2:#FDBA74; --warm3:#FCA5A5; --soft:#1a1b1f;
    }
    /* -------------------- БАЗА -------------------- */
    html,body{ height:100%; }
    body{
      background:
        radial-gradient(900px 600px at 10% -10%, rgba(245,158,11,.12), transparent 60%),
        radial-gradient(700px 500px at 95% 0%, rgba(253,186,116,.07), transparent 55%),
        var(--bg);
      color: #e5e7eb;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    /* Мягкий шум */
    body::after{
      content:""; position:fixed; inset:0; pointer-events:none; opacity:.07;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.7' numOctaves='2'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      mix-blend-mode:soft-light;
    }
    /* Водяной знак-лого (не перекрывает контент) */
    .wm{position:fixed;inset:0;pointer-events:none;opacity:.08;background-repeat:no-repeat;background-position:center 30%;background-size:min(70vmin,560px);filter:blur(.2px);}
    body::before{
      content:""; position:fixed; inset:0; pointer-events:none; opacity:.065;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' x2='1'%3E%3Cstop offset='0' stop-color='%23F59E0B'/%3E%3Cstop offset='1' stop-color='%23FDBA74'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='256' cy='256' r='230' fill='url(%23g)' opacity='.35'/%3E%3Cpath d='M256 60c-34 34-34 68 0 102s34 68 0 102-34 68 0 102' stroke='%23fde68a' stroke-width='28' fill='none' stroke-linecap='round'/%3E%3Ccircle cx='256' cy='420' r='22' fill='%23fde68a'/%3E%3C/svg%3E");
      background-repeat:no-repeat; background-position:center 30%; background-size:min(70vmin,560px);
      filter: blur(0.2px);
    }

    /* -------------------- КАРТОЧКИ -------------------- */
    .ui-card{
      border-radius: 1rem;
      background:rgba(17,18,22,.82);
      border:1px solid rgba(148,163,184,.18);
      box-shadow:0 10px 25px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.03);
      backdrop-filter:blur(6px);
      transition: transform .25s cubic-bezier(.2,.6,.2,1), box-shadow .25s cubic-bezier(.2,.6,.2,1);
    }
    .ui-card:hover{ transform:translateY(-1px); box-shadow:0 14px 30px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.03); }

    /* -------------------- ЛОГО (дыхание) -------------------- */
    header svg{
      filter: drop-shadow(0 0 12px rgba(245,158,11,.25));
      animation: glowPulse .9s ease-out 1, breath 10s ease-in-out infinite 1.2s;
      transform-origin:center;
    }
    @keyframes glowPulse{0%{transform:scale(.92);filter:drop-shadow(0 0 0 rgba(245,158,11,0))}100%{transform:scale(1);filter:drop-shadow(0 0 18px rgba(245,158,11,.5))}}
    @keyframes breath{0%,100%{filter:drop-shadow(0 0 10px rgba(245,158,11,.25))}50%{filter:drop-shadow(0 0 16px rgba(245,158,11,.44))}}

    /* -------------------- БРЕНД-ЧИПСЫ -------------------- */
    .brand-chip{
      white-space:nowrap; transition:transform .18s cubic-bezier(.2,.6,.2,1), box-shadow .18s cubic-bezier(.2,.6,.2,1), border-color .18s;
      border:1px solid rgba(148,163,184,.2);
      padding:0 .75rem; height:2.25rem; display:inline-flex; align-items:center; border-radius:.9rem;
      background: rgba(15,16,19,.75);
      will-change:transform;
    }
    .brand-chip:hover{ transform:translateY(-1px); box-shadow:0 0 0 2px rgba(245,158,11,.18) inset; }
    .brand-chip.active{ box-shadow:0 0 0 2px rgba(245,158,11,.35) inset; border-color:rgba(245,158,11,.45); }
    .brand-chip:active{ transform:translateY(0); }

    /* -------------------- ПОЯВЛЕНИЯ (stagger) -------------------- */
    .reveal{ opacity:0; transform:translateY(8px); }
    .reveal.in{ opacity:1; transform:none; transition:opacity .22s cubic-bezier(.3,.7,.2,1) var(--d,0ms), transform .22s cubic-bezier(.3,.7,.2,1) var(--d,0ms); }
    .reveal-up{ opacity:0; transform:translateY(10px); }
    .reveal-up.in{ opacity:1; transform:none; transition:opacity .22s cubic-bezier(.3,.7,.2,1) var(--d,0ms), transform .22s cubic-bezier(.3,.7,.2,1) var(--d,0ms); }

    /* -------------------- ИНПУТЫ/СЛАЙДЕРЫ -------------------- */
    input[type=text], input[type=number], textarea{
      transition: box-shadow .18s, border-color .18s, background-color .18s;
    }
    input[type=text]:focus, input[type=number]:focus, textarea:focus{
      outline: none; box-shadow: 0 0 0 2px var(--ring); border-color: rgba(245,158,11,.35);
    }
    input[type=range]{ background:linear-gradient(90deg, rgba(245,158,11,.35), rgba(253,186,116,.35)); height:6px; border-radius:999px; }
    input[type=range]::-webkit-slider-thumb{ -webkit-appearance:none; width:18px; height:18px; border-radius:50%; background:#fff; border:3px solid #cbd5e1; box-shadow:0 2px 8px rgba(0,0,0,.45); transition: transform .12s ease; }
    input[type=range]:active::-webkit-slider-thumb{ transform: scale(1.08); }
    input[type=range]:active{ box-shadow:0 0 0 6px rgba(245,158,11,.12); }

    /* -------------------- ПОЛОСА МИКСА -------------------- */
    .mix-seg{ transition:width .25s cubic-bezier(.2,.6,.2,1); }

    /* -------------------- КНОПКИ -------------------- */
    .btn-primary{
      position:relative; color:#0b0b0b;
      background:linear-gradient(90deg,var(--warm1),var(--warm2));
      box-shadow:0 0 0 1px rgba(245,158,11,.35) inset, 0 8px 20px rgba(245,158,11,.15);
      transition: transform .18s cubic-bezier(.2,.6,.2,1), box-shadow .18s cubic-bezier(.2,.6,.2,1);
    }
    .btn-primary:hover{ transform: translateY(-1px); box-shadow:0 0 0 1px rgba(245,158,11,.45) inset, 0 12px 28px rgba(245,158,11,.22); }
    .btn-primary:active{ transform: translateY(0); }
    .btn-primary.shimmer::before{
      content:""; position:absolute; inset:0;
      background:linear-gradient(120deg,transparent,rgba(255,255,255,.18),transparent);
      transform:translateX(-100%); animation:shimmer 3s linear infinite;
    }
    @keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}

    /* Ripple на клике */
    .tap{ position:relative; overflow:hidden; transition: transform .06s ease; }
    .tap:active{ transform: translateY(0.5px) scale(.997); }
    .tap::after{
      content:""; position:absolute; left:var(--rx,50%); top:var(--ry,50%); width:0; height:0; border-radius:999px;
      transform:translate(-50%,-50%); background:radial-gradient(circle, rgba(253,186,116,.35) 0, rgba(253,186,116,0) 60%); opacity:0; pointer-events:none;
    }
    .tap.rippling::after{ animation:ripple .6s ease-out; }
    @keyframes ripple{0%{opacity:.35; width:0; height:0}100%{opacity:0; width:220px; height:220px}}

    /* -------------------- ДОСТУПНОСТЬ -------------------- */
    :focus-visible{ outline:2px solid transparent; box-shadow:0 0 0 2px var(--ring); border-color:rgba(245,158,11,.45)!important; }

    /* Уважение к reduced motion */
    @media (prefers-reduced-motion:reduce){
      *{animation:none!important; transition:none!important}
    }
  </style>

  <!-- Ранний дружелюбный экран ошибок -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    (function(){
      function showFatal(msg){
        var root = document.getElementById('root');
        if (!root) return;
        root.innerHTML =
          '<div class="min-h-[100svh] flex items-center justify-center p-6">' +
          '  <div class="max-w-md w-full rounded-xl border border-rose-800 bg-rose-950 p-4 text-sm">' +
          '    <div class="font-bold mb-2 text-rose-200">Произошла ошибка</div>' +
          '    <div class="text-rose-100/90 whitespace-pre-wrap break-words">' + String(msg || 'Unknown error') + '</div>' +
          '  </div>' +
          '</div>';
      }
      window.addEventListener('error', function(e){
        var m = (e && (e.message || (e.error && e.error.message))) || 'Script error';
        showFatal(m);
      });
      window.addEventListener('unhandledrejection', function(e){
        var m = (e && (e.reason && (e.reason.message || e.reason))) || 'Unhandled rejection';
        showFatal(m);
      });
    })();
  </script>
</head>
<body class="text-slate-100">
  <div id="root" class="min-h-[100svh]"></div>

  <script>
  
// === THEME RUNTIME =======================================================
const THEMES = ['warm-dark','frosted-glass','cyber-neon','minimal-light','earth-sepia','high-contrast'];
function getSavedTheme(){ try{ return localStorage.getItem('theme') || ''; }catch(_){ return ''; } }
function applyTheme(t){
  if(!THEMES.includes(t)) t = 'warm-dark';
  document.body.setAttribute('data-theme
